@{
    ViewBag.Title = "ApplyForJob";
}

<style>
    .editor-field input[type="radio"] {
        width:50px;
    }
    </style>
<script src="~/Scripts/jquery-1.8.2.js"></script>
<script src="~/Scripts/jquery-ui-1.8.24.js"></script>

@*<script src="http://ajapx.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>*@
<script>
    function SelectStream(companyname)
    {

        var url = "/Applicant/ApplyForJob";
        
        $.ajax({
            url: url,
            data: { CompanyName: companyname },
            cache: false,
            type: "POST",
            success: function (data) {
                console.log(data);
                var html;
                html = "Stream ";
                for (var i = 0; i < data.length; i++)
                {
                    html+="<input class=\"stream\" id=\""+data[i]+"\" type=\"radio\" onclick=\"func1(\""+data[i]+"\",\""+companyname+"\")\" name=\"stream\" value=\""+data[i]+"\">"+data[i] ;                   
                    

                }
                //alert("appending");
                //$('#mytable tbody > tr').remove();
                $('#SelectStream').append(html);

            },
            error: function (reponse) {

                alert("error : " + reponse);
            }
        });
    }
    function func1(stream,company)
    {
        alert(stream);

        var url = "/Applicant/ApplyForJob1";
        alert("in here");
        $.ajax({
            url: url,
            data: { stream: stream, company : company },
            cache: false,
            type: "POST",
            success: function (data) {
                console.log(data);
                var html;
                html = "Eligibility For Job Offers <br/><tr><th>Job Type</th><th>MinSSCPercentage</th><th>MinHSCPercentage</th><th>MinGradAvg</th> <th>MinPostGradAvg</th><th>SalPerMonth</th><th>Location</th><th>LastDate</th></tr> ";
                for (var i = 0; i < data.length; i++)
                {
                    //html += "<input class=\"stream\" id=\"" + data[i] + "\" type=\"radio\" onclick=\"func1(" + data[i] + ")\" name=\"stream\" value=\"" + data[i] + "\">" + data[i];
                    html += "<tr> <td>" + data[i].JobType + "</td> <td> " + data[i].MinSSCPercent + "</td> <td> " + data[i].MinHSCPercent + "</td> <td> " + data[i].MinGradAvg + "</td> <td> " + data[i].MinPGAvg + "</td> <td> " + data[i].SalPerMonth + "</td> <td> " + data[i].Experience + "</td> <td> " + data[i].AppLastDate + "</td> <td> <input type=\"button\" value=\"Select Job Offer\" /> </td> </tr>";

                }

                $('#showtable tbody > tr').remove();
                $('#showtable').append(html);

            },
            error: function (reponse) {

                alert("error : " + reponse);
            }
        });
    }
</script>

<form action="">
<h2>Apply For Job</h2>

    
<div>
    <p>Select Company Name</p> 
    
    @Html.DropDownList("CompanyName", new SelectList(@ViewBag.list), "--Select--", new { @id = "CompanyName", @style = "width:200px;" , @onchange = "javascript:SelectStream(this.value);" }) 
      
</div>


<div id="SelectStream" class="editor-field">
     
</div>
<table id="showtable" class="display">
          
      <tbody> 
 
 
 
 
      </tbody> 
  
</table>
</form> 