@model SeekYourCareer.Models.Workshop

@{
    ViewBag.Title = "View Workshop Applicants - Staff";
}

<script src="http://ajapx.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script>
    function GetDomains(company) {
        $('#SelectDomain').empty();
        $('#mytable').empty();
        $('#ApplicantDiv').empty();
        $('#SelectWorkshop').empty();
        var url = "/WStaff/PostWorkshopDD";
        
        $.ajax({
            url: url,
            data: { cname: company },
            cache: false,
            type: "POST",
            success: function (data) {

                var trhtml;
                trhtml = 'Domain <select name="DD" id="selectData" onchange="GetWorkshopOffers()">';
                trhtml += '<option value="">' + '--Select--' + '</option>';
                for (var i = 0; i < data.length; i++) {
                    trhtml += '<option value="' + data[i] + '">' + data[i] + '</option>';
                }
                trhtml += "</select>";


                $('#SelectDomain').append(trhtml);
                //$('body').on('change', '#selectData', GetWorkshopIDs);
            },
            error: function (reponse) {
                alert("Error");
                alert("error : " + reponse);
            }
        });
    }

    function GetWorkshopOffers() {
        $('#ApplicantDiv').empty();
        $('#mytable').empty();
        Domain = document.getElementById("selectData").value;
        var url = "/WStaff/PostWorkshopM/";
           
        $.ajax({
            url: url,
            data: { domain: Domain },
            cache: false,
            type: "POST",
            success: function (data) {
                var trhtml = "<table><tr><th>Workshop Location</th><th>Starting Date</th><th>End Date</th><th>No of seats</th><th>Min Graduation %</th><th>Min PostGrad %</th><th>Min Experience</th><th>Select Workshop</th><th>Reject Workshop</th></tr>";
           
                for (var i = 0; i < data.WorkshopDetail.length; i++) {

                    trhtml += "<tr> <td> " + data.WorkshopDetail[i].Location + "</td> <td> " + data.WorkshopDetail[i].FromDate + "</td> <td> " + data.WorkshopDetail[i].ToDate + "</td> <td> " + data.WorkshopDetail[i].NoOfSeats + "</td> <td> " + data.WorkshopDetail[i].MinGradPct + "</td> <td> " + data.WorkshopDetail[i].MinPGPct + "</td> <td> " + data.WorkshopDetail[i].MinExperience + "</td> <td> <input type=\"button\" value=\"Select\" onclick=\"Select()\" /> </td> <td> <input type=\"button\" value=\"Reject\" onclick=\"Reject()\" /> </td></tr>";
                }

                
                $('#ApplicantDiv').html(trhtml);

            },
            error: function (reponse) {

                alert("error : " + reponse);
            }
        });
    }

       function Select() {
           alert("Selected");
       }

       function Reject() {
           alert("Rejected");
       }
</script> 


<h2>POST WORKSHOP OFFERS</h2>

<div>
    <p>Company</p> 
    
    @Html.DropDownList("ddlcompany", new SelectList(@ViewBag.WSCompanyNames), "--Select--", new { @id = "ddlcompany", @style = "width:200px;" , @onchange = "javascript:GetDomains(this.value);" }) 
</div>

<div id="SelectDomain" class="editor-field">
     
</div>
 
<div id="SelectWorkshop" class="editor-field">
     
</div>

<div id ="mytable" class ="display"> 
    
</div> 

<div id="ApplicantDiv" name="DetailsDiv" align="center"> 

</div> 